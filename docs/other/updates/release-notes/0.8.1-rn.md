# 0.8.1の新機能のハイライト

0.8.1リリースの概要：

- コードエディター用の型を生成する`dfx generate` コマンドを追加。

- 匿名IDのサポートを追加。

- `dfx import` がデフォルトの ID で動作するようになりました。

- 非標準のウォレットモジュールのサポートを追加しました。

- アセットcanister のパフォーマンスを改善し、より多く、より大きなアセットを保存できるようにしました。

- Motoko のバージョン 0.6.7 への更新。

## DFXの変更点

### 新しいコマンド：dfx generate

``` bash
dfx generate
```

この新しいコマンドはcanisters の型宣言を dfx.json に生成します。

dfx.jsonの対応する設定で、何がどのように生成されるかを制御できます。

dfx.json → "canisters" → "\<canister\_name\>" の下に、開発者は "declarations" 設定を追加できます。オプションは

- "output" →canister の宣言を置くディレクトリ｜デフォルトは "src/declarations/\<canister\_name\>" です。

- "bindings" → \[\] オプションのリスト、("js", "ts", "did", "mo") | デフォルトは "js", "ts", "did" です。

- "env\_override" → "src/dfx/assets/language\_bindings/canister.js" テンプレート内の process.env.{canister\_name\_uppercase}\_CANISTER\_ID を置き換える文字列。

js宣言の出力

- index.js (「src/dfx/assets/language\_bindings/canister.js」テンプレートから生成)

- \<canister\_name\>.did.js - candid js バインディング出力

ts宣言の出力

- \<canister\_name\>.did.d.ts - candid ts バインディング出力

did宣言の出力

- \<canister\_name\>.did - candidなdidバインディング出力

mo宣言の出力

- \<canister\_name\>.mo - candid mo バインディング出力

### 新機能：dfxは匿名IDをサポートするようになりました。

これらのフォームのどちらかで使用してください：

``` bash
dfx identity use anonymous
dfx --identity anonymous ...
```

### feat: デフォルトIDのインポート

デフォルトのアイデンティティは`dfx identity new …​` で生成された pem ファイルで、Ed25519 秘密鍵を含んでいます。これらは`~/.config/dfx/identity/xxx/identity.pem` にあります。このようなpemファイルを別のコンピュータにコピーして、そこにインポートすることができます。

``` bash
dfx identity new alice
cp ~/.config/dfx/identity/xxx/identity.pem alice.pem
# copy the pem file to another computer, then
dfx identity import alice alice.pem
```

以前は、手動でpemファイルを目的のディレクトリにコピーして "import "していました。この回避策は今でも有効です。`import` サブコマンドを使用することをお勧めします。

### 新機能DFX\_WALLET\_WASM環境変数で非標準のウォレットモジュールを提供できるようになりました。

DFX\_WALLET\_WASM を環境変数に定義すると、ウォレットを作成したりアップグレードしたりするときに、別のウォレットモジュールを使用できるようになります。

## アセットに対する変更Canister

### パフォーマンスの向上: 呼び出し元が提供する完全なアセット SHA-256 ハッシュを信頼するようになりました。

呼び出し元が SHA-256 ハッシュを提供する場合 (dfx が提供します)、アセットcanister は変更をコミットする際にこれらのハッシュを再計算しなくなりました。このような再計算により、canisters がcycles を使い果たしたり、更新ごとの最大cycle の制限を超えようとしたりすることがありました。

<!---
# Highlights of what’s new in 0.8.1

An overview of the 0.8.1 release:

-   Adds a `dfx generate` command to generate types for code editors.

-   Adds support for anonymous identities.

-   Makes `dfx import` work with default identities.

-   Adds support for nonstandard wallet modules.

-   Improves performance of the asset canister to allow for storage of more and larger assets.

-   Updates to version 0.6.7 of Motoko.

## Changes to DFX

### New command: dfx generate

``` bash
dfx generate
```

This new command will generate type declarations for canisters in dfx.json.

You can control what will be generated and how with corresponding configuration in dfx.json.

Under dfx.json → "canisters" → "\<canister_name\>", developers can add a "declarations" config. Options are:

-   "output" → directory to place declarations for that canister \| default is "src/declarations/\<canister_name\>"

-   "bindings" → \[\] list of options, ("js", "ts", "did", "mo") \| default is "js", "ts", "did"

-   "env_override" → a string that will replace process.env.{canister_name_uppercase}\_CANISTER_ID in the "src/dfx/assets/language_bindings/canister.js" template.

js declarations output

-   index.js (generated from "src/dfx/assets/language_bindings/canister.js" template)

-   \<canister_name\>.did.js - candid js binding output

ts declarations output

-   \<canister_name\>.did.d.ts - candid ts binding output

did declarations output

-   \<canister_name\>.did - candid did binding output

mo declarations output

-   \<canister_name\>.mo - candid mo binding output

### New feature: dfx now supports the anonymous identity

Use it with either of these forms:

``` bash
dfx identity use anonymous
dfx --identity anonymous ...
```

### feat: import default identities

Default identities are the pem files generated by `dfx identity new …​` which contain Ed25519 private keys. They are located at `~/.config/dfx/identity/xxx/identity.pem`. Now, you can copy such pem file to another computer and import it there.

``` bash
dfx identity new alice
cp ~/.config/dfx/identity/xxx/identity.pem alice.pem
# copy the pem file to another computer, then
dfx identity import alice alice.pem
```

Before, people could manually copy the pem files to the target directory to "import". That workaround still works. We suggest using the `import` subcommand since it also validate the private key.

### New feature: Can now provide a nonstandard wallet module with DFX_WALLET_WASM environment variable

Define DFX_WALLET_WASM in the environment to use a different wasm module when creating or upgrading the wallet.

## Changes to the Asset Canister

### Performance improvement: trust full asset SHA-256 hashes provided by the caller

When the caller provides SHA-256 hashes (which dfx does), the asset canister will no longer recompute these hashes when committing the changes. These recomputations were causing canisters to run out of cycles, or to attempt to exceed the maximum cycle limit per update.

-->
